{% extends 'base.html.twig' %}

{% block title %}Vente de véhicules{% endblock %}

{% block stylesheets %}
<style>
    /* Sidebar styling */
    .filter-sidebar {
        background-color: #f4f4f4;
        padding: 20px;
        width: 300px;
        border-radius: 10px;
    }

    .filter-sidebar h2 {
        color: #007bff;
        font-size: 18px;
        margin-bottom: 15px;
        text-transform: uppercase;
        border-bottom: 2px solid #007bff;
        padding-bottom: 10px;
    }

    .filter-sidebar label {
        font-size: 14px;
        margin-bottom: 5px;
        display: block;
    }

    .filter-sidebar input[type="text"],
    .filter-sidebar input[type="number"] {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }

    .filter-sidebar input[type="submit"] {
        width: 100%;
        padding: 10px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        font-weight: bold;
    }

    .filter-sidebar input[type="submit"]:hover {
        background-color: #0056b3;
    }

    /* Container for sidebar and results */
    .vehicle-container {
        display: flex;
        justify-content: space-between;
    }

    .vehicle-listing {
        flex-grow: 1;
        margin-left: 20px;
    }

    /* Styling for vehicle cards */
    .vehicle-card {
        background-color: white;
        border: 1px solid #ccc;
        width: 23%;
        margin: 15px;
        padding: 15px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .vehicle-card img {
        max-width: 100%;
        border-radius: 10px;
    }

    .vehicle-card h3 {
        margin: 10px 0;
        font-size: 18px;
    }

    .vehicle-card .price {
        font-size: 20px;
        color: #e74c3c;
        font-weight: bold;
        margin: 5px 0;
    }

    .vehicle-card .details {
        font-size: 14px;
        color: #666;
        margin: 5px 0;
    }
</style>
{% endblock %}

{% block body %}
<h2 style="text-align:center; margin-top:20px;">Vente de véhicules neufs et occasions</h2>

<div class="vehicle-container">
    <!-- Sidebar for filters -->
    <div class="filter-sidebar">
        <h2>Que recherchez-vous ?</h2>
        <form method="GET" action="{{ path('app_vehicle_index') }}">
            <label for="keywords">Mots-clés</label>
            <input type="text" id="keywords" name="keywords" value="{{ app.request.query.get('keywords', '') }}" placeholder="Mots-clés">

            <label for="marque">Marques</label>
            <input type="text" id="marque" name="marque" value="{{ app.request.query.get('marque', '') }}" placeholder="Marque">

            <label for="model">Modèles</label>
            <input type="text" id="model" name="model" value="{{ app.request.query.get('model', '') }}" placeholder="Modèle">

            <label for="carburant">Carburant</label>
            <input type="text" id="carburant" name="carburant" value="{{ app.request.query.get('carburant', '') }}" placeholder="Carburant">

            <label for="minPrice">Prix (min)</label>
            <input type="number" id="minPrice" name="minPrice" value="{{ app.request.query.get('minPrice', '') }}" placeholder="Prix minimum">

            <label for="maxPrice">Prix (max)</label>
            <input type="number" id="maxPrice" name="maxPrice" value="{{ app.request.query.get('maxPrice', '') }}" placeholder="Prix maximum">

            <label for="minKilometrage">Kilométrage (min)</label>
            <input type="number" id="minKilometrage" name="minKilometrage" value="{{ app.request.query.get('minKilometrage', '') }}" placeholder="Kilométrage minimum">

            <label for="maxKilometrage">Kilométrage (max)</label>
            <input type="number" id="maxKilometrage" name="maxKilometrage" value="{{ app.request.query.get('maxKilometrage', '') }}" placeholder="Kilométrage maximum">

            <label for="minYear">Année (min)</label>
            <input type="number" id="minYear" name="minYear" value="{{ app.request.query.get('minYear', '') }}" placeholder="Année minimum">

            <label for="maxYear">Année (max)</label>
            <input type="number" id="maxYear" name="maxYear" value="{{ app.request.query.get('maxYear', '') }}" placeholder="Année maximum">

            <input type="submit" value="Rechercher">
        </form>
    </div>

    <!-- Vehicle listing -->
    <div class="vehicle-listing">
        {% if vehicles is empty %}
            <p>Aucun véhicule disponible pour le moment.</p>
        {% else %}
            {% for vehicle in vehicles %}
                <div class="vehicle-card">
                    {% if vehicle.image %}
                        <img src="{{ asset('images/' ~ vehicle.image) }}" alt="Photo de {{ vehicle.marque }}">
                    {% else %}
                        <img src="{{ asset('images/default.png') }}" alt="Image non disponible">
                    {% endif %}
                    <h3>{{ vehicle.marque }}</h3>
                    <p class="price">{{ vehicle.prix }} €</p>
                    <p class="details">{{ vehicle.kilometrage }} km - {{ vehicle.annee }}</p>
                    <a href="{{ path('app_vehicle_show', {id: vehicle.id}) }}">+ d'infos</a>
                </div>
            {% endfor %}
        {% endif %}
    </div>
</div>
{% endblock %}
