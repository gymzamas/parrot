{% extends 'base.html.twig' %}

{% block title %}Accueil - Garage Parrot{% endblock %}

{% block stylesheets %}
    <style>
        body {
            background-color: #f7e8ea; /* Rose pâle pour l'arrière-plan */
        }

        .hero {
            background-image: url('{{ asset('images/Contact.png') }}');
            background-size: cover;
            background-position: center;
            height: 50vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
        }

        .hero h1 {
            font-size: 3rem;
            font-weight: bold;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
        }

        .content {
            padding: 40px;
            text-align: center;
        }

        .content p {
            font-size: 1.2rem;
            color: #555;
            margin-bottom: 20px;
        }

        /* Styles des cartes de service */
        .services-section {
            display: flex;
            justify-content: space-around;
            padding: 50px 0;
        }

        .service-card {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 30%;
            transition: transform 0.3s ease-in-out, opacity 0.5s;
            opacity: 0;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            transform: translateY(50px);
        }

        .service-card img {
            width: 100%;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .service-card h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #D92332;
        }

        .service-card p {
            font-size: 1rem;
            color: #666;
        }

        /* Animation au scroll */
        .visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Slider des témoignages */
        .slider {
            position: relative;
            overflow: hidden;
            width: 60%;
            margin: auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }

        .slides {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .testimonial {
            min-width: 100%;
            box-sizing: border-box;
        }

        .testimonial p {
            font-style: italic;
            color: #555;
        }

        .testimonial .author {
            font-weight: bold;
            color: #D92332;
        }

        .no-testimonial {
            text-align: center;
            font-size: 1.2rem;
            color: #D92332;
        }

        .slider-buttons {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            display: flex;
            justify-content: space-between;
        }

        .slider-button {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 10px;
        }

        .slider-button:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }
    </style>
{% endblock %}

{% block javascripts %}
    <script>
        document.addEventListener('scroll', function() {
            const cards = document.querySelectorAll('.service-card');
            const triggerBottom = window.innerHeight / 1.3;

            cards.forEach(card => {
                const cardTop = card.getBoundingClientRect().top;

                if (cardTop < triggerBottom) {
                    card.classList.add('visible');
                } else {
                    card.classList.remove('visible');
                }
            });
        });

        // Slider Logic for Testimonials
        let slideIndex = 0;
        const slides = document.querySelectorAll('.testimonial');
        const totalSlides = slides.length;

        function showSlides() {
            slides.forEach((slide, index) => {
                slide.style.transform = `translateX(-${slideIndex * 100}%)`;
            });

            slideIndex = (slideIndex + 1) % totalSlides; // Looping back to first slide
        }

        setInterval(showSlides, 5000); // Change slide every 5 seconds
    </script>
{% endblock %}

{% block body %}
    <!-- Hero Section -->
    <div class="hero">
        <h1>Bienvenue au Garage Parrot</h1>
    </div>

    <!-- Contenu principal -->
    <div class="content">
        <p>Découvrez nos services professionnels et profitez de notre expertise pour l'entretien et la réparation de votre véhicule.</p>
        <p>Explorez notre sélection de véhicules d'occasion et prenez rendez-vous en ligne.</p>
    </div>

    <!-- Services Section avec images et animations -->
    <div class="services-section">
        <a href="{{ path('app_service_index') }}" class="service-card"> <!-- Lien vers la page de réparation & entretien -->
            <img src="{{ asset('images/entretien.jpg') }}" alt="Entretien">
            <h3>Réparation & Entretien</h3>
            <p>Nous offrons des services de réparation et d'entretien pour tous types de véhicules.</p>
        </a>
        <a href="{{ path('app_voiture_occasion_index') }}" class="service-card"> <!-- Lien vers la page des voitures d'occasion -->
            <img src="{{ asset('images/voiture_occasion.jpg') }}" alt="Voiture d'occasion">
            <h3>Vente de Voitures d'Occasion</h3>
            <p>Découvrez nos véhicules d'occasion soigneusement sélectionnés pour leur qualité et fiabilité.</p>
        </a>
        <a href="{{ path('contact') }}" class="service-card"> <!-- Lien vers la page de contact pour prise de rendez-vous -->
            <img src="{{ asset('images/rendez_vous.jpg') }}" alt="Rendez-vous">
            <h3>Prise de Rendez-vous</h3>
            <p>Réservez un rendez-vous en ligne pour un entretien ou une réparation rapide.</p>
        </a>
    </div>

    <!-- Testimonials Section (Slider) -->
    <div class="slider">
        {% if temoignages is not empty %}
            <div class="slides">
                {% for temoignage in temoignages %}
                    <div class="testimonial">
                        <p>"{{ temoignage.commentaire }}"</p>
                        <p class="author">- {{ temoignage.nom }}, Note: {{ temoignage.note }}/5</p>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="no-testimonial">Aucun témoignage disponible pour le moment.</p>
        {% endif %}
    </div>
{% endblock %}
